<head>
    <!-- Plotly.js -->
    <script src="plotly.js"></script>
</head>
<body>
<a id="mya"></a>
<!-- Plotly chart will be drawn inside this DIV -->
<div id="myDiv" style="width:100%;height:100%"></div>


<script>
    /* JAVASCRIPT CODE GOES HERE */
//     Plotly.d3.csv('data.csv', function(err, rows){
// function unpack(rows, key) {
// return rows.map(function(row) { return row[key]; });
// }

// var z_data=[ ]
// for(i=0;i<24;i++)
// {
// z_data.push(unpack(rows,i));
// }

// var data = [{
// z: z_data,
// type: 'surface'
// }];

// var layout = {
// title: 'Mt Bruno Elevation',
// autosize: false,
// width: 500,
// height: 500,
// margin: {
// l: 65,
// r: 50,
// b: 65,
// t: 90,
// }
// };
//
// &lt;!&ndash;&ndash;&gt;
// Plotly.newPlot('myDiv', data, layout, {showSendToCloud: true});
// });
//     this.anim = "true";
//     var that = this; // you store the reference to a `this` in `that` variable,
                    // so you could use it in a callback function. You have
                    // to do that because it has its own `this` defined
//
//
//
    // this.anim = jsinterface.testNativeMethod();
    // console.log(that.anim);
    // setTimeout(function() {
    //  callFunc();
    //  }, 5000);
//
    //  function callFunc() {
    //     that.anim = jsinterface.testNativeMethod();
    //     console.log(that.anim);         // Function returns the product of a and b
    //  }
    </script>
<script>

  function getData() {
       var arr = [];
       for(let i=0;i<80;i++)
           arr.push(Array(3).fill().map(() => Math.random()))
       return arr;
}

 var layout = {
 title: 'New Sensor data',
 autosize: true,
 width: 400,
 height: 400,
 margin: {
 l: 30,
 r: 30,
 b: 30,
 t: 90,
 }
 };
//var data = getData();
//Plotly.newPlot('myDiv', [{ //multiple traces
//     z: data,
//     type: 'surface'
//}],layout, {showSendToCloud: true});

 plotNewChart();
 updateChartAfterDelay();

function updateChartAfterDelay(){
  setTimeout(function() {
     updateChart();
     }, 50);
}

function updateChart(){
  var data = getData();
    Plotly.react('myDiv', [{ //multiple traces
        z: data,
        type: 'surface'
    }],layout, {showSendToCloud: true});

  updateChartAfterDelay();
}

function plotNewChart(){
var data = getData();
Plotly.newPlot('myDiv', [{ //multiple traces
     z: data,
     type: 'surface'
}],layout, {showSendToCloud: true});
}




</script>
</body>
